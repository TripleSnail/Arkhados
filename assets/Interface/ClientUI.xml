<?xml version="1.0" encoding="UTF-8"?>
<nifty xmlns="http://nifty-gui.sourceforge.net/nifty-1.3.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <useStyles filename="nifty-default-styles.xml" />
    <useControls filename="nifty-default-controls.xml" />
    <style id="my-listbox-item-style" base="nifty-listbox-item">
        <effect>
            <onCustom name="updateScrollpanelPositionToDisplayElement" target="listBoxStatic" oneShot="true" />
        </effect>
    </style>

    <screen id="null" controller="arkhados.ClientMain">
    </screen>

    <screen id="main_menu" controller="arkhados.ClientMain">
        <layer childLayout="center">
            <panel width="400px" align="center" valign="center" style="nifty-panel" childLayout="vertical">
                <effect>
                    <onStartScreen  name="fade" startColor="#0000" endColor="#000f" length="500"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>

                <text style="nifty-label" text="Welcome to Arkhados!" >
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="500" startDelay="250"/>
                    </effect>
                </text>
                <control id="goto_join_server" name="button" label="Join Game" align="center">
                    <interact onClick="gotoMenu(join_server)" />
                </control>
                <text style="nifty-label" text=""/>
                <control id="goto_settings" name="button" label="Settings" align="center">
                    <interact onClick="gotoMenu(settings)" />
                </control>
                <text style="nifty-label" text=""/>
                <text style="nifty-label" text=""/>
                <control id="exit_application_button" name="button" label="Exit game" align="center" valign="bottom">
                    <interact onClick="closeApplication()" />
                </control>
            </panel>
        </layer>
    </screen>

    <screen id="settings" controller="arkhados.ClientMain">
        <layer id="layer" childLayout="center">
            <panel id="root_panel" height="400px" width="350px" align="center" valign="center" style="nifty-panel" childLayout="vertical">
                <effect>
                    <onStartScreen  name="fade" startColor="#0000" endColor="#000f" length="500"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>
                <text style="nifty-label" text="Settings" />
                <text style="nifty-label" text="" />
                <control id="input_settings_button" name="button" label="Configure controls" align="center" width="200px">
                    <interact onClick="gotoMenu(input_settings)"/>
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="500" startDelay="250"/>
                    </effect>
                </control>
                <text style="nifty-label" text=""/>
                <control id="exit_button" name="button" label="Back" align="center" width="200px">
                    <interact onClick="gotoMenu(main_menu)" />
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="500" startDelay="250"/>
                    </effect>
                </control>
            </panel>
        </layer>
    </screen>

    <screen id="input_settings" controller="arkhados.KeySetter">
        <layer id="layer" childLayout="center">
            <panel id="panel" height="400px" width="350px" align="center" valign="center" style="nifty-panel" childLayout="vertical">

                <text style="nifty-label" text=""/>
                <panel height="*" width="*" align="center" childLayout="horizontal">
                    <panel height="700px" width="100px" align="left" childLayout="vertical">
                        <text style="nifty-label" text="Up" align="center" />
                        <text style="nifty-label" text="Down" align="center" />
                        <text style="nifty-label" text="Left" align="center" />
                        <text style="nifty-label" text="Right" align="center" />

                        <text style="nifty-label" text="Spell 1" align="center" />
                        <text style="nifty-label" text="Spell 2" align="center" />
                        <text style="nifty-label" text="Spell 3" align="center" />
                        <text style="nifty-label" text="Spell 4" align="center" />
                        <text style="nifty-label" text="Spell 5" align="center" />
                        <text style="nifty-label" text="Spell 6" align="center" />
                    </panel>
                    <panel height="700px" width="300px" align="center" childLayout="vertical">
                        <control id="button_up" name="button" label="Up" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_up, move-up)" />
                        </control>
                        <control id="button_down" name="button" label="Down" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_down, move-down)" />
                        </control>
                        <control id="button_left" name="button" label="Left" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_left, move-left)" />
                        </control>
                        <control id="button_right" name="button" label="Right" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_right, move-right)" />
                        </control>
                        <control id="button_m1" name="button" label="Spell 1" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_m1, m1)" />
                        </control>
                        <control id="button_m2" name="button" label="Spell 2" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_m2, m2)" />
                        </control>
                        <control id="button_q" name="button" label="Spell 3" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_q, q)" />
                        </control>
                        <control id="button_e" name="button" label="Spell 4" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_e, e)" />
                        </control>
                        <control id="button_r" name="button" label="Spell 5" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_r, r)" />
                        </control>
                        <control id="button_space" name="button" label="Spell 6" align="center" width="120px">
                            <interact onClick="waitAndSetKey(button_space, space)" />
                        </control>
                    </panel>
                </panel>
                <control id="exit_button" name="button" label="Back" align="center" width="200px">
                    <interact onClick="gotoMenu(settings)" />
                </control>
            </panel>
        </layer>
    </screen>

    <screen id="join_server" controller="arkhados.ClientMain">
        <layer id="layer" childLayout="center">
            <panel id="panel" height="400px" width="350px" align="center" valign="center" style="nifty-panel" childLayout="vertical">
                <effect>
                    <onStartScreen  name="fade" startColor="#0000" endColor="#000f" length="500"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>
                <text style="nifty-label" text="Join server" >
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="1500" startDelay="250"/>
                    </effect>
                </text>
                <text style="nifty-label" text=""/>
                <image align="center" valign="center" filename="Interface/Images/logo.gif" >
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="1500" startDelay="250"/>
                    </effect>
                </image>
                <text style="nifty-label" text="Address"/>
                <control id="server_ip" name="textfield" align="center" valign="center" width="60%" text="localhost">
                </control>
                <text style="nifty-label" text="Port:"/>
                <control id="server_port" name="textfield" align="center" valign="center" width="60%" text="12345">
                </control>
                <text style="nifty-label" text=""/>
                <text style="nifty-label" text="Enter nickname" valign="center"/>
                <control id="username_text" name="textfield" align="center" valign="center" width="60%">
                    <interact onEnter="connect()"/>
                </control>
                <text style="nifty-label" text=""/>
                <control id="start_button" name="button" label="Start Game" align="center">
                    <interact onClick="connect()"/>
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="1500" startDelay="250"/>
                    </effect>
                </control>

                <text style="nifty-label" text=""/>
                <text id="status_text" font="aurulent-sans-16.fnt" color="#ffff" text="" align="center" valign="center" >
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="1500" startDelay="250"/>
                    </effect>
                </text>
                <text style="nifty-label" text=""/>
                <control id="exit_button" name="button" label="Back" align="center" width="200px">
                    <interact onClick="gotoMenu(main_menu)" />
                    <effect>
                        <onStartScreen name="fade" startColor="#0000" endColor="#000f" length="1500" startDelay="250"/>
                    </effect>
                </control>
            </panel>
        </layer>
    </screen>

    <screen id="lobby" controller="arkhados.ClientMain">
        <layer id="layer" childLayout="vertical">
            <panel id="panel" childLayout="horizontal">
                <panel id="players_panel" height="100%" width="320px" valign="center" style="nifty-panel" childLayout="vertical">
                    <text style="nifty-label" text="Players" valign="center"/>
                    <panel id="panel" childLayout="horizontal">
                        <control id="players_list" name="listBox" horizontal="false" width="*" height="100%" childLayout="vertical" visibleToMouse="true">

                        </control>
                    </panel>
                </panel>
                <panel id="maps_panel" height="100%" width="300px" valign="center" style="nifty-panel" childLayout="vertical">
                    <text style="nifty-label" text="Available Maps" valign="center"/>
                    <panel id="panel" childLayout="horizontal">
                        <control id="maps_list" name="listBox" horizontal="false" height="100%" childLayout="vertical" visibleToMouse="true">
                            <panel id="panel" childLayout="vertical" visibleToMouse="true" width="100%" padding="20px" >
                            </panel>
                        </control>
                    </panel>
                    <text style="nifty-label" text="" valign="center"/>
                    <control id="select_hero_button" name="button" label="Select hero" align="center">
                        <interact onClick="gotoMenu(hero_selection)"/>
                    </control>
                    <control id="start_server_button" name="button" label="Start Game" align="center">
                        <interact onClick="sendStartGameRequest()"/>
                    </control>
                </panel>
                <effect>
                    <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>
            </panel>
            <panel id="bottom_panel" childLayout="horizontal" style="nifty-panel" height="30%">
                <panel id="chat_panel" childLayout="vertical">
                    <control id="chat_list" name="listBox" horizontal="false" height="*" childLayout="vertical" visibleToMouse="true">

                    </control>
                    <panel id="chat_bottom_bar" childLayout="horizontal">
                        <control id="chat_text" name="textfield" valign="center">
                            <interact onEnter="sendChat()"/>
                        </control>
                        <control id="send_button" name="button" label="send" valign="center">
                            <interact onClick="sendChat()"/>
                        </control>
                    </panel>
                </panel>
                <effect>
                    <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>
            </panel>
        </layer>
    </screen>

    <screen id="hero_selection" controller="arkhados.ClientMain">
        <layer childLayout="center">
            <panel id="panel_root" align="center" valign="center" style="nifty-panel" childLayout="vertical">
                <effect>
                    <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true" />
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true" />
                </effect>
                <text style="nifty-label" text="Select your hero" />
                <text style="nifty-label" text="" />

                <panel id="categories" childLayout="horizontal">
                    <panel id="ranged" childLayout="vertical" >
                        <text style="nifty-label" text="Ranged" />
                        <control id="embermage" name="button" label="Embermage">
                            <interact onClick="selectHero(Mage)" />
                        </control>
                    </panel>
                    <panel id="melee" childLayout="vertical" >
                        <text style="nifty-label" text="Melee" />
                        <control id="venator" name="button" label="Venator">
                            <interact onClick="selectHero(Venator)" />
                        </control>
                    </panel>
                </panel>
                <text style="nifty-label" text="" />
                <control id="back" name="button" label="Back">
                    <interact onClick="gotoMenu(lobby)" />
                </control>

            </panel>
        </layer>
    </screen>

    <screen id="load_level" controller="arkhados.ClientMain">
        <layer id="layer" childLayout="center">
            <panel id="panel" height="140px" width="350px" align="center" valign="center" style="nifty-panel" childLayout="vertical">
                <effect>
                    <onStartScreen name="move" mode="in" direction="top" length="300" startDelay="0" inherit="true"/>
                    <onEndScreen name="move" mode="out" direction="bottom" length="300" startDelay="0" inherit="true"/>
                </effect>
                <text style="nifty-label" text="Loading Level" />
                <text style="nifty-label" text=""/>
                <text id="status_text" font="aurulent-sans-16.fnt" color="#ffff" text="Loading..." align="center" valign="center" />
            </panel>
        </layer>
    </screen>

    <screen id="default_hud" controller="arkhados.ClientMain">
        <layer id="layer" childLayout="vertical">
<!--            <panel id="panel_top" childLayout="horizontal">
                <panel id="top_panel_left" height="60px" width="90%" align="left" valign="top" style="nifty-panel" childLayout="horizontal">
                </panel>
            </panel>

            <panel id="panel_bottom" childLayout="horizontal" width="100%"  height="80px" style="nifty-panel" align="left"valign="center">
            </panel>-->
        </layer>
    </screen>
</nifty>
